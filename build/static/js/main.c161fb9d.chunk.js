(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(17),u=n.n(c),s=n(8),o=n(1),i=n.n(o),p=n(4),b=n(5),l=n(0),f=function(e){var t=e.searchValue,n=e.setSearchValue;return Object(l.jsxs)("div",{children:["Filter shown with"," ",Object(l.jsx)("input",{onChange:function(e){return n(e.target.value)},value:t})]})},h=function(e){var t=e.handleSubmit,n=e.handleNameChange,r=e.handlePhoneChange,a=e.newName,c=e.newNumber;return Object(l.jsxs)("form",{onSubmit:t,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{onChange:function(e){return n(e)},value:a})]}),Object(l.jsxs)("div",{children:["number:"," ",Object(l.jsx)("input",{onChange:function(e){return r(e)},value:c})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},d={margin:0,display:"inline-block"},j=function(e){var t=e.person;return Object(l.jsxs)("p",{style:d,children:[t.name," ",t.number]},t.id)},v=function(e){var t=e.personsDisplay,n=e.onDelete;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:"Numbers"}),t.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)(j,{person:e}),Object(l.jsx)("button",{onClick:function(){return n(e.id)},style:{marginLeft:8},children:"Delete"})]},e.id)}))]})},m=n(6),x=n.n(m),O="/api/persons",w=function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(O);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post(O,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),409===e.t0.response.status?e.t0.response.data:{error:"Bad request"};case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.delete("".concat(O,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.put("".concat(O,"/").concat(t.id),t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),409===e.t0.response.status?e.t0.response.data:{error:"Bad request"};case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=e.message,n=e.type;return null===t?null:Object(l.jsx)("div",{className:n,children:t})},C=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),u=Object(b.a)(c,2),o=u[0],d=u[1],j=Object(r.useState)(""),m=Object(b.a)(j,2),x=m[0],O=m[1],C=Object(r.useState)(""),N=Object(b.a)(C,2),D=N[0],E=N[1],V=Object(r.useState)(null),B=Object(b.a)(V,2),L=B[0],P=B[1],q=Object(r.useState)(""),F=Object(b.a)(q,2),I=F[0],J=F[1],A=function(){var e=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,w();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){(function(){var e=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{A()}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var M=function(){var e=Object(p.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.find((function(e){return e.id===t})),!window.confirm("Delete ".concat(r.name,"?"))){e.next=11;break}return e.prev=2,e.next=5,y(t);case 5:A(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(i.a.mark((function e(t){var r,c,u,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.some((function(e){return e.name===o}))){e.next=21;break}if(!window.confirm("".concat(o," is already added to the phonebook, replace the old number with a new one?"))){e.next=19;break}return r=n.find((function(e){return e.name===o})),c=Object(s.a)(Object(s.a)({},r),{},{number:x}),e.prev=5,e.next=8,g(c);case 8:z(c,"update"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),z(e.t0,"serverError");case 14:return e.prev=14,A(),d(""),O(""),e.finish(14);case 19:e.next=37;break;case 21:return e.prev=21,u={name:o,number:x},e.next=25,k(u);case 25:p=e.sent,a(n.concat(p)),z(p),d(""),O(""),e.next=37;break;case 32:e.prev=32,e.t1=e.catch(21),z(e.t1,"serverError"),d(""),O("");case 37:case"end":return e.stop()}}),e,null,[[5,11,14,19],[21,32]])})));return function(t){return e.apply(this,arguments)}}(),U=D?n.filter((function(e){return e.name.toLowerCase().includes(D.toLowerCase())})):n,z=function(e,t){"update"===t?(P("Updated ".concat(e.name)),J("success")):"serverError"===t?(P("".concat(e.error)),J("error")):"error"===t?(P("Information concerning ".concat(e.name," has already been removed from the server")),J("error")):(P("Added ".concat(e.name)),J("success")),setTimeout((function(){return P(null)}),5e3)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(S,{message:L,type:I}),Object(l.jsx)(f,{searchValue:D,setSearchValue:E}),Object(l.jsx)(h,{handleSubmit:T,handleNameChange:function(e){d(e.target.value)},handlePhoneChange:function(e){O(e.target.value)},newName:o,newNumber:x}),Object(l.jsx)(v,{personsDisplay:U,onDelete:M})]})};n(42);u.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.c161fb9d.chunk.js.map